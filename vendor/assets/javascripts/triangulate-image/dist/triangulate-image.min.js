!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.triangulate=t()}}(function(){var t;return function e(t,n,r){function a(i,u){if(!n[i]){if(!t[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return a(n?n:e)},d,d.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n["default"]=function(t){function e(){return t}function n(){var t=a({},J);return W||a(t,L),t}function r(){var t=a({},J);return B||a(t,U),t}function o(t){return D(f["default"],t)}function u(t){return D(f["default"],t,!0)}function l(t){return D(function(t){return t},t)}function s(t){return D(function(t){return t},t,!0)}function g(t){return P(function(t){return t},t)}function y(t){return P(function(t){return t},t,!0)}function m(t){return P(c["default"],t)}function v(t){return P(c["default"],t,!0)}function w(t){return P(d["default"],t)}function _(t){return P(d["default"],t,!0)}function M(t){return P(h["default"],t)}function k(t){return P(h["default"],t,!0)}function D(t,e,n){return E=!!n,W=function(){return E?t(e):new Promise(function(n,r){try{var a=t(e);n(a)}catch(o){r(o)}})},C()?O():r()}function P(t,e,r){return T=!!r,B=function(n,r){return T?t(n,r,e):new Promise(function(a,o){try{var i=t(n,r,e);a(i)}catch(u){o(u)}})},C()?O():n()}function C(){return W&&B}function O(){if(E&&T){var e=W(t),n=(0,p["default"])(e,t),r=B(n,e);return r}return new Promise(function(e,n){var r;I().then(function(e){return r=e,S(r,t)},n).then(function(t){return j(t,r)},n).then(function(t){e(t)},n)})}function I(t){return new Promise(function(e,n){if(E)try{var r=W(t);e(r)}catch(a){n(a)}else W(t).then(e,n)})}function S(t,e){return new Promise(function(n,r){N.addEventListener("message",function(t){if(t.data&&t.data.polygonJSONStr){var e=JSON.parse(t.data.polygonJSONStr);n(e)}else r(t.data&&t.data.err?t.data.err:t)}),N.postMessage({params:e,imageData:t,imageDataWidth:t.width,imageDataHeight:t.height})})}function j(t,e){return new Promise(function(n,r){if(T)try{var a=B(t,e);n(a)}catch(o){r(o)}else B(t,e).then(n,r)})}t=(0,i["default"])(t);var E=!1,T=!1,N=(0,x["default"])(b["default"]),W=void 0,B=void 0,J={getParams:e,getInput:n,getOutput:r},L={fromImage:o,fromImageSync:u,fromImageData:l,fromImageDataSync:s},U={toData:g,toDataSync:y,toDataURL:m,toDataURLSync:v,toImageData:w,toImageDataSync:_,toSVG:M,toSVGSync:k};return n()};var o=t("./input/sanitizeInput"),i=r(o),u=t("./input/browser/fromImageToImageData"),f=r(u),l=t("./output/polygonsToImageData"),d=r(l),s=t("./output/polygonsToDataURL"),c=r(s),g=t("./output/polygonsToSVG"),h=r(g),y=t("./polygons/imageDataToPolygons"),p=r(y),m=t("webworkify"),x=r(m),v=t("./workers/triangulationWorker"),b=r(v);e.exports=n["default"]},{"./input/browser/fromImageToImageData":4,"./input/sanitizeInput":6,"./output/polygonsToDataURL":7,"./output/polygonsToImageData":8,"./output/polygonsToSVG":9,"./polygons/imageDataToPolygons":15,"./workers/triangulationWorker":25,webworkify:30}],2:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){var e=(0,i["default"])(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),n.getImageData(0,0,t.width,t.height)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){if((0,f["default"])(t)){if("undefined"==typeof Uint8ClampedArray){if("undefined"==typeof window)throw new Error("Can't copy imageData in webworker without Uint8ClampedArray support.");return a(t)}var e=new Uint8ClampedArray(t.data);if("undefined"==typeof ImageData)return{width:t.width,height:t.height,data:e};var n=void 0;try{n=new ImageData(e,t.width,t.height)}catch(r){if("undefined"==typeof window)throw new Error("Can't copy imageData in webworker without proper ImageData() support.");n=a(t)}return n}throw new Error("Given imageData object is not useable.")};var o=t("canvas-browserify"),i=r(o),u=t("../util/isImageData"),f=r(u);e.exports=n["default"]},{"../util/isImageData":22,"canvas-browserify":26}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){for(var e=t.data.length,n=void 0,r=0;e>r;r+=4)n=.34*t.data[r]+.5*t.data[r+1]+.16*t.data[r+2],t.data[r]=n,t.data[r+1]=n,t.data[r+2]=n;return t},e.exports=n["default"]},{}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){if(t instanceof HTMLImageElement){if(!t.naturalWidth||!t.naturalHeight||t.complete===!1)throw new Error("This this image hasn't finished loading: "+t.src);var e=new o["default"](t.naturalWidth,t.naturalHeight),n=e.getContext("2d");n.drawImage(t,0,0,e.width,e.height);var r=n.getImageData(0,0,e.width,e.height);return r.data&&r.data.length&&("undefined"==typeof r.width&&(r.width=t.naturalWidth),"undefined"==typeof r.height&&(r.height=t.naturalHeight)),r}throw new Error("This object does not seem to be an image.")};var a=t("canvas-browserify"),o=r(a);o["default"].Image;e.exports=n["default"]},{"canvas-browserify":26}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={accuracy:.7,blur:4,fill:!0,stroke:!0,strokeWidth:.5,lineJoin:"miter",vertexCount:700,threshold:50},e.exports=n["default"]},{}],6:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n["default"]=function(t){return t=(0,f["default"])(t),"object"!==("undefined"==typeof t?"undefined":a(t))&&(t={}),"number"!=typeof t.accuracy||isNaN(t.accuracy)?t.accuracy=d["default"].accuracy:t.accuracy=(0,i["default"])(t.accuracy,0,1),("number"!=typeof t.blur||isNaN(t.blur))&&(t.blur=d["default"].blur),t.blur<=0&&(t.blur=1),"string"!=typeof t.fill&&"boolean"!=typeof t.fill&&(t.fill=d["default"].fill),"string"!=typeof t.stroke&&"boolean"!=typeof t.stroke&&(t.stroke=d["default"].stroke),("number"!=typeof t.strokeWidth||isNaN(t.strokeWidth))&&(t.strokeWidth=d["default"].strokeWidth),"number"!=typeof t.threshold||isNaN(t.threshold)?t.threshold=d["default"].threshold:t.threshold=(0,i["default"])(t.threshold,1,100),("string"!=typeof t.lineJoin||-1===s.indexOf(t.lineJoin))&&(t.lineJoin=d["default"].lineJoin),t.gradients&&t.fill?t.gradients=!0:t.gradients=!1,t.gradients&&(("number"!=typeof t.gradientStops||isNaN(t.gradientStops)||t.gradientStops<2)&&(t.gradientStops=2),t.gradientStops=Math.round(t.gradientStops)),("number"!=typeof t.vertexCount||isNaN(t.vertexCount))&&(t.vertexCount=d["default"].vertexCount),t.vertexCount<=0&&(t.vertexCount=1),t};var o=t("../util/clamp"),i=r(o),u=t("../util/clone"),f=r(u),l=t("./defaultParams"),d=r(l),s=["miter","round","bevel"];e.exports=n["default"]},{"../util/clamp":16,"../util/clone":17,"./defaultParams":5}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){var r=n&&n.dpr?n.dpr:1,a=(0,o["default"])(e,n,r);return(0,u["default"])(a.ctx,t,e,r),a.canvas.toDataURL()};var a=t("../util/makeCanvasAndContext"),o=r(a),i=t("../util/drawPolygonsOnContext"),u=r(i);e.exports=n["default"]},{"../util/drawPolygonsOnContext":19,"../util/makeCanvasAndContext":24}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){var r=n&&n.dpr?n.dpr:1,a=(0,o["default"])(e,n,r,!0).ctx;return(0,u["default"])(a,t,e,r),a.getImageData(0,0,e.width*r,e.height*r)};var a=t("../util/makeCanvasAndContext"),o=r(a),i=t("../util/drawPolygonsOnContext"),u=r(i);e.exports=n["default"]},{"../util/drawPolygonsOnContext":19,"../util/makeCanvasAndContext":24}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e){var n="";t.length&&t[0].gradient&&(n="<defs>");var r="";t.forEach(function(t,e){var a=t.a,o=t.b,i=t.c;r+='<polygon points="'+a.x+","+a.y+" "+o.x+","+o.y+" "+i.x+","+i.y+'"',t.gradient?!function(){var a=t.boundingBox,o=((t.gradient.x1-a.x)/a.width*100).toFixed(3),i=((t.gradient.y1-a.y)/a.height*100).toFixed(3),u=((t.gradient.x2-a.x)/a.width*100).toFixed(3),f=((t.gradient.y2-a.y)/a.height*100).toFixed(3);n+='\n	<linearGradient id="gradient-'+e+'" x1="'+o+'%" y1="'+i+'%" x2="'+u+'%" y2="'+f+'%">';var l=t.gradient.colors.length-1;t.gradient.colors.forEach(function(t,e){var r="rgb("+t.r+", "+t.g+", "+t.b+")",a=(e/l*100).toFixed(3);n+='\n					<stop offset="'+a+'%" stop-color="'+r+'"/>\n				'}),n+="</linearGradient>",r+=' fill="url(#gradient-'+e+')"',t.strokeWidth>0&&(r+=' stroke="url(#gradient-'+e+')" stroke-width="'+t.strokeWidth+'" stroke-linejoin="'+t.lineJoin+'"')}():(r+=t.fill?' fill="'+t.fill+'"':' fill="transparent"',t.strokeColor&&(r+=' stroke="'+t.strokeColor+'" stroke-width="'+t.strokeWidth+'" stroke-linejoin="'+t.lineJoin+'"')),r+="/>\n	"}),n.length&&(n+="\n		</defs>");var a='<?xml version="1.0" standalone="yes"?>\n<svg width="'+e.width+'" height="'+e.height+'" xmlns="http://www.w3.org/2000/svg" version="1.1" >\n	'+n+"\n	"+r+"\n</svg>";return a},e.exports=n["default"]},{}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){return t.forEach(function(t){t.boundingBox=(0,o["default"])([t.a,t.b,t.c])}),t.filter(function(t){return t.boundingBox.width>0&&t.boundingBox.height>0})};var a=t("../util/getBoundingBox"),o=r(a);e.exports=n["default"]},{"../util/getBoundingBox":20}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){var r=n.fill,a="string"==typeof r?n.fill:!1,i=n.stroke,u="string"==typeof i?n.stroke:!1,f=n.strokeWidth,l=n.lineJoin;return t.forEach(function(t,n){var d={x:.33333*(t.a.x+t.b.x+t.c.x),y:.33333*(t.a.y+t.b.y+t.c.y)},s=(0,o["default"])(d,e);r&&(t.fill=a||"rgb("+s.r+", "+s.g+", "+s.b+")"),i&&(u?t.strokeColor=u:t.strokeColor="rgb("+s.r+", "+s.g+", "+s.b+")",t.strokeWidth=f,t.lineJoin=l)}),t};var a=t("../util/getColorByPos"),o=r(a);e.exports=n["default"]},{"../util/getColorByPos":21}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){return t.forEach(function(t,r){var a={};"abc".split("").forEach(function(n){var r=(0,l["default"])(t[n],e);a[n]={key:n,color:r,x:t[n].x,y:t[n].y},a[n].luminance=(0,o["default"])(a[n].color);var i="abc".replace(n,"").split("");a[n].median={x:(t[i[0]].x+t[i[1]].x)/2,y:(t[i[0]].y+t[i[1]].y)/2},a[n].medianColor=(0,l["default"])(a[n].median,e),a[n].medianLuminance=(0,o["default"])(a[n].medianColor)});for(var i=[a.a,a.b,a.c].sort(function(t,e){return Math.abs(t.luminance-t.medianLuminance)-Math.abs(e.luminance-e.medianLuminance)}),f=i[0],d=i[0],s=f.median,c=[d],g=(0,u["default"])(d,s),h=1,y=n.gradientStops-2;y>h;h++){var p=h*(g/n.gradientStops),m=p/g,x={x:d.x+m*(s.x-d.x),y:d.y+m*(s.y-d.y)};c.push(x)}c.push(s),t.gradient={x1:f.x,y1:f.y,x2:f.median.x,y2:f.median.y,colors:c.map(function(t){return(0,l["default"])(t,e)})},n.stroke&&(t.strokeWidth=n.strokeWidth,t.lineJoin=n.lineJoin),a=null}),t};var a=t("../util/luminance"),o=r(a),i=t("../util/distance"),u=r(i),f=t("../util/getColorByPos"),l=r(f);e.exports=n["default"]},{"../util/distance":18,"../util/getColorByPos":21,"../util/luminance":23}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e){var n,r,a,o,i,u,f,l,d,s=2,c=t.width,g=t.height,h=t.data,y=[];for(r=0;g>r;r+=s)for(n=0;c>n;n+=s){for(l=d=0,a=-1;1>=a;a++)if(u=r+a,f=u*c,u>=0&&g>u)for(o=-1;1>=o;o++)i=n+o,i>=0&&c>i&&(l+=h[i+f<<2],d++);d&&(l/=d),l>e&&y.push({x:n,y:r})}return y},e.exports=n["default"]},{}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e,n){var r=t+"|"+e;n[r]||(n[r]={x:t,y:e}),r=null}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n,r,o){var i={},u=Math.max(~~(e*(1-n)),5),f=Math.round(Math.sqrt(u)),l=Math.round(Math.ceil(u/f)),d=~~(r/f),s=~~(o/l),c=0,g=0,h=0,y=0;for(y=0;o>y;y+=s)for(c++,g=c%2===0?~~(d/2):0,h=g;r>h;h+=d)r>h&&o>y&&a(~~(h+Math.cos(y)*s),~~(y+Math.sin(h)*d),i);a(0,0,i),a(r-1,0,i),a(r-1,o-1,i),a(0,o-1,i);var p=e-Object.keys(i).length,m=t.length,x=~~(m/p);if(e>0&&x>0){var v=0;for(v=0;m>v;v+=x)a(t[v].x,t[v].y,i)}return t=null,Object.keys(i).map(function(t){return i[t]})};var o=t("../util/clamp");r(o);e.exports=n["default"]},{"../util/clamp":16}],15:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e){if((0,l["default"])(t)){var n={width:t.width,height:t.height},r=(0,s["default"])(t),i=(0,s["default"])(t),f=(0,a.imageDataRGBA)(r,0,0,n.width,n.height,e.blur),d=(0,g["default"])(f),c=(0,u["default"])(d).toImageData(),h=(0,y["default"])(c,e.threshold),p=(0,m["default"])(h,e.vertexCount,e.accuracy,n.width,n.height),x=(0,o.triangulate)(p);return x=(0,v["default"])(x),x=e.fill===!0&&e.gradients===!0?(0,M["default"])(x,i,e):(0,w["default"])(x,i,e)}throw new Error("Can't work with the imageData provided. It seems to be corrupt.")};var a=t("stackblur-canvas"),o=t("delaunay-fast"),i=t("sobel"),u=r(i),f=t("../util/isImageData"),l=r(f),d=t("../imagedata/copyImageData"),s=r(d),c=t("../imagedata/greyscale"),g=r(c),h=t("./getEdgePoints"),y=r(h),p=t("./getVerticesFromPoints"),m=r(p),x=t("./addBoundingBoxesToPolygons"),v=r(x),b=t("./addColorToPolygons"),w=r(b),_=t("./addGradientsToPolygons"),M=r(_);e.exports=n["default"]},{"../imagedata/copyImageData":2,"../imagedata/greyscale":3,"../util/isImageData":22,"./addBoundingBoxesToPolygons":10,"./addColorToPolygons":11,"./addGradientsToPolygons":12,"./getEdgePoints":13,"./getVerticesFromPoints":14,"delaunay-fast":27,sobel:28,"stackblur-canvas":29}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n){return e>t?e:t>n?n:t},e.exports=n["default"]},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e=!1;if("undefined"!=typeof t)try{e=JSON.parse(JSON.stringify(t))}catch(n){}return e},e.exports=n["default"]},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},e.exports=n["default"]},{}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n,r){return r=r||1,e.forEach(function(e,n){t.beginPath(),t.moveTo(e.a.x*r,e.a.y*r),t.lineTo(e.b.x*r,e.b.y*r),t.lineTo(e.c.x*r,e.c.y*r),t.lineTo(e.a.x*r,e.a.y*r),e.gradient?!function(){var n=t.createLinearGradient(e.gradient.x1*r,e.gradient.y1*r,e.gradient.x2*r,e.gradient.y2*r),a=e.gradient.colors.length-1;e.gradient.colors.forEach(function(t,e){var r="rgb("+t.r+", "+t.g+", "+t.b+")";n.addColorStop(e/a,r)}),t.fillStyle=n,t.fill(),e.strokeWidth>0&&(t.strokeStyle=n,t.lineWidth=e.strokeWidth*r,t.lineJoin=e.lineJoin,t.stroke())}():(e.fill&&(t.fillStyle=e.fill,t.fill()),e.strokeColor&&(t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeWidth*r,t.lineJoin=e.lineJoin,t.stroke())),t.closePath()}),t},e.exports=n["default"]},{}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e=1/0,n=-(1/0),r=1/0,a=-(1/0);return t.forEach(function(t){t.x<e&&(e=t.x),t.y<r&&(r=t.y),t.x>n&&(n=t.x),t.y>a&&(a=t.y)}),{x:e,y:r,width:n-e,height:a-r}},e.exports=n["default"]},{}],21:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){var n=(0,i["default"])(t.x,1,e.width-2),r=(0,i["default"])(t.y,1,e.height-2),a=(0|n)+(0|r)*e.width<<2;return a>=e.data.length&&(a=e.data.length-5),{r:e.data[a],g:e.data[a+1],b:e.data[a+2]}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var o=t("./clamp"),i=r(o);e.exports=n["default"]},{"./clamp":16}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n["default"]=function(t){return t&&"number"==typeof t.width&&"number"==typeof t.height&&t.data&&"number"==typeof t.data.length&&"object"===r(t.data)},e.exports=n["default"]},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e=[t.r,t.g,t.b].map(function(t){return t/=255,.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*e[0]+.7152*e[1]+.0722*e[2]},e.exports=n["default"]},{}],24:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t,e,n,r){var a=e&&e.backgroundColor?e.backgroundColor:!1,i=new o["default"](t.width*n,t.height*n,r),u=i.getContext("2d");return a&&(u.fillStyle=a,u.fillRect(0,0,t.width*n,t.height*n),u.fillStyle="transparent"),{canvas:i,ctx:u}};var a=t("canvas-browserify"),o=r(a);e.exports=n["default"]},{"canvas-browserify":26}],25:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){t.addEventListener("message",function(e){if(e.data.imageData&&e.data.params)try{var n=e.data.imageData;"undefined"==typeof n.width&&"number"==typeof e.data.imageDataWidth&&(n.width=e.data.imageDataWidth),"undefined"==typeof n.height&&"number"==typeof e.data.imageDataHeight&&(n.height=e.data.imageDataHeight);var r=(0,i["default"])(e.data.imageData,e.data.params);t.postMessage({polygonJSONStr:JSON.stringify(r)})}catch(a){t.postMessage({err:a.message||a})}else e.data.imageData?t.postMessage({err:"Parameters are missing."}):t.postMessage({err:"ImageData is missing."});t.close()})}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a;var o=t("../polygons/imageDataToPolygons"),i=r(o);e.exports=n["default"]},{"../polygons/imageDataToPolygons":15}],26:[function(t,e,n){var r=e.exports=function(t,e){var n=document.createElement("canvas");return n.width=t||300,n.height=e||150,n};r.Image=function(){var t=document.createElement("img");return t}},{}],27:[function(t,e,n){function r(t,e,n){this.a=t,this.b=e,this.c=n;var r,a,o,i,u=e.x-t.x,f=e.y-t.y,l=n.x-t.x,d=n.y-t.y,s=u*(t.x+e.x)+f*(t.y+e.y),c=l*(t.x+n.x)+d*(t.y+n.y),g=2*(u*(n.y-e.y)-f*(n.x-e.x));Math.abs(g)<1e-6?(r=Math.min(t.x,e.x,n.x),a=Math.min(t.y,e.y,n.y),o=.5*(Math.max(t.x,e.x,n.x)-r),i=.5*(Math.max(t.y,e.y,n.y)-a),this.x=r+o,this.y=a+i,this.r=o*o+i*i):(this.x=(d*s-f*c)/g,this.y=(u*c-l*s)/g,o=this.x-t.x,i=this.y-t.y,this.r=o*o+i*i)}function a(t,e){return e.x-t.x}function o(t){var e,n,r,a,o,i=t.length;t:for(;i;)for(n=t[--i],e=t[--i],r=i;r;)if(o=t[--r],a=t[--r],e===a&&n===o||e===o&&n===a){t.splice(i,2),t.splice(r,2),i-=2;continue t}}function i(t){if(t.length<3)return[];t.sort(a);for(var e=t.length-1,n=t[e].x,i=t[0].x,u=t[e].y,f=u;e--;)t[e].y<u&&(u=t[e].y),t[e].y>f&&(f=t[e].y);var l,d,s,c=i-n,g=f-u,h=c>g?c:g,y=.5*(i+n),p=.5*(f+u),m=[new r({x:y-20*h,y:p-h,__sentinel:!0},{x:y,y:p+20*h,__sentinel:!0},{x:y+20*h,y:p-h,__sentinel:!0})],x=[],v=[];for(e=t.length;e--;){for(v.length=0,l=m.length;l--;)c=t[e].x-m[l].x,c>0&&c*c>m[l].r?(x.push(m[l]),m.splice(l,1)):(g=t[e].y-m[l].y,c*c+g*g>m[l].r||(v.push(m[l].a,m[l].b,m[l].b,m[l].c,m[l].c,m[l].a),m.splice(l,1)));for(o(v),l=v.length;l;)s=v[--l],d=v[--l],m.push(new r(d,s,t[e]))}for(Array.prototype.push.apply(x,m),e=x.length;e--;)(x[e].a.__sentinel||x[e].b.__sentinel||x[e].c.__sentinel)&&x.splice(e,1);return x}r.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.lineTo(this.c.x,this.c.y),t.closePath(),t.stroke()},"undefined"!=typeof e&&(e.exports={Triangle:r,triangulate:i})},{}],28:[function(e,n,r){!function(e){"use strict";function a(t){function e(t){return function(e,n,r){return r=r||0,t[4*(o*n+e)+r]}}if(!(this instanceof a))return new a(t);var n,r,o=t.width,i=t.height,u=[[-1,0,1],[-2,0,2],[-1,0,1]],f=[[-1,-2,-1],[0,0,0],[1,2,1]],l=[],d=[],s=t.data,c=e(s);for(r=0;i>r;r++)for(n=0;o>n;n++){var g=c(n,r,0),h=c(n,r,1),y=c(n,r,2),p=(g+h+y)/3;d.push(p,p,p,255)}for(c=e(d),r=0;i>r;r++)for(n=0;o>n;n++){var m=u[0][0]*c(n-1,r-1)+u[0][1]*c(n,r-1)+u[0][2]*c(n+1,r-1)+u[1][0]*c(n-1,r)+u[1][1]*c(n,r)+u[1][2]*c(n+1,r)+u[2][0]*c(n-1,r+1)+u[2][1]*c(n,r+1)+u[2][2]*c(n+1,r+1),x=f[0][0]*c(n-1,r-1)+f[0][1]*c(n,r-1)+f[0][2]*c(n+1,r-1)+f[1][0]*c(n-1,r)+f[1][1]*c(n,r)+f[1][2]*c(n+1,r)+f[2][0]*c(n-1,r+1)+f[2][1]*c(n,r+1)+f[2][2]*c(n+1,r+1),v=Math.sqrt(m*m+x*x)>>>0;l.push(v,v,v,255)}var b=l;return"function"==typeof Uint8ClampedArray&&(b=new Uint8ClampedArray(l)),b.toImageData=function(){return a.toImageData(b,o,i)},b}function o(t,e,n){return{width:e,height:n,data:t}}a.toImageData=function(t,e,n){if("function"==typeof ImageData&&"[object Uint16Array]"===Object.prototype.toString.call(t))return new ImageData(t,e,n);if("object"==typeof window&&"object"==typeof window.document){var r=document.createElement("canvas");if("function"==typeof r.getContext){var a=r.getContext("2d"),i=a.createImageData(e,n);return i.data.set(t),i}return new o(t,e,n)}return new o(t,e,n)},"undefined"!=typeof r?("undefined"!=typeof n&&n.exports&&(r=n.exports=a),r.Sobel=a):"function"==typeof t&&t.amd?t([],function(){return a}):e.Sobel=a}(this)},{}],29:[function(t,e,n){function r(t,e,n,r){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLImageElement)return;var a=t.naturalWidth,i=t.naturalHeight;if("string"==typeof e)var e=document.getElementById(e);else if(!e instanceof HTMLCanvasElement)return;e.style.width=a+"px",e.style.height=i+"px",e.width=a,e.height=i;var f=e.getContext("2d");f.clearRect(0,0,a,i),f.drawImage(t,0,0),isNaN(n)||1>n||(r?o(e,0,0,a,i,n):u(e,0,0,a,i,n))}function a(t,e,n,r,a){if("string"==typeof t)var t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var o,i=t.getContext("2d");try{try{o=i.getImageData(e,n,r,a)}catch(u){throw new Error("unable to access local image data: "+u)}}catch(u){throw new Error("unable to access image data: "+u)}return o}function o(t,e,n,r,o,u){if(!(isNaN(u)||1>u)){u|=0;var f=a(t,e,n,r,o);f=i(f,e,n,r,o,u),t.getContext("2d").putImageData(f,e,n)}}function i(t,e,n,r,a,o){var i,u,f,c,g,h,y,p,m,x,v,b,w,_,M,k,D,P,C,O,I,S,j,E,T=t.data,N=o+o+1,W=r-1,B=a-1,J=o+1,L=J*(J+1)/2,U=new l,R=U;for(f=1;N>f;f++)if(R=R.next=new l,f==J)var G=R;R.next=U;var A=null,H=null;y=h=0;var q=d[o],F=s[o];for(u=0;a>u;u++){for(k=D=P=C=p=m=x=v=0,b=J*(O=T[h]),w=J*(I=T[h+1]),_=J*(S=T[h+2]),M=J*(j=T[h+3]),p+=L*O,m+=L*I,x+=L*S,v+=L*j,R=U,f=0;J>f;f++)R.r=O,R.g=I,R.b=S,R.a=j,R=R.next;for(f=1;J>f;f++)c=h+((f>W?W:f)<<2),p+=(R.r=O=T[c])*(E=J-f),m+=(R.g=I=T[c+1])*E,x+=(R.b=S=T[c+2])*E,v+=(R.a=j=T[c+3])*E,k+=O,D+=I,P+=S,C+=j,R=R.next;for(A=U,H=G,i=0;r>i;i++)T[h+3]=j=v*q>>F,0!=j?(j=255/j,T[h]=(p*q>>F)*j,T[h+1]=(m*q>>F)*j,T[h+2]=(x*q>>F)*j):T[h]=T[h+1]=T[h+2]=0,p-=b,m-=w,x-=_,v-=M,b-=A.r,w-=A.g,_-=A.b,M-=A.a,c=y+((c=i+o+1)<W?c:W)<<2,k+=A.r=T[c],D+=A.g=T[c+1],P+=A.b=T[c+2],C+=A.a=T[c+3],p+=k,m+=D,x+=P,v+=C,A=A.next,b+=O=H.r,w+=I=H.g,_+=S=H.b,M+=j=H.a,k-=O,D-=I,P-=S,C-=j,H=H.next,h+=4;y+=r}for(i=0;r>i;i++){for(D=P=C=k=m=x=v=p=0,h=i<<2,b=J*(O=T[h]),w=J*(I=T[h+1]),_=J*(S=T[h+2]),M=J*(j=T[h+3]),p+=L*O,m+=L*I,x+=L*S,v+=L*j,R=U,f=0;J>f;f++)R.r=O,R.g=I,R.b=S,R.a=j,R=R.next;for(g=r,f=1;o>=f;f++)h=g+i<<2,p+=(R.r=O=T[h])*(E=J-f),m+=(R.g=I=T[h+1])*E,x+=(R.b=S=T[h+2])*E,v+=(R.a=j=T[h+3])*E,k+=O,D+=I,P+=S,C+=j,R=R.next,B>f&&(g+=r);for(h=i,A=U,H=G,u=0;a>u;u++)c=h<<2,T[c+3]=j=v*q>>F,j>0?(j=255/j,T[c]=(p*q>>F)*j,T[c+1]=(m*q>>F)*j,T[c+2]=(x*q>>F)*j):T[c]=T[c+1]=T[c+2]=0,p-=b,m-=w,x-=_,v-=M,b-=A.r,w-=A.g,_-=A.b,M-=A.a,c=i+((c=u+J)<B?c:B)*r<<2,p+=k+=A.r=T[c],m+=D+=A.g=T[c+1],x+=P+=A.b=T[c+2],v+=C+=A.a=T[c+3],A=A.next,b+=O=H.r,w+=I=H.g,_+=S=H.b,M+=j=H.a,k-=O,D-=I,P-=S,C-=j,H=H.next,h+=r}return t}function u(t,e,n,r,o,i){if(!(isNaN(i)||1>i)){i|=0;var u=a(t,e,n,r,o);u=f(u,e,n,r,o,i),t.getContext("2d").putImageData(u,e,n)}}function f(t,e,n,r,a,o){var i,u,f,c,g,h,y,p,m,x,v,b,w,_,M,k,D,P,C,O,I=t.data,S=o+o+1,j=r-1,E=a-1,T=o+1,N=T*(T+1)/2,W=new l,B=W;for(f=1;S>f;f++)if(B=B.next=new l,f==T)var J=B;B.next=W;var L=null,U=null;y=h=0;var R=d[o],G=s[o];for(u=0;a>u;u++){for(_=M=k=p=m=x=0,v=T*(D=I[h]),b=T*(P=I[h+1]),w=T*(C=I[h+2]),p+=N*D,m+=N*P,x+=N*C,B=W,f=0;T>f;f++)B.r=D,B.g=P,B.b=C,B=B.next;for(f=1;T>f;f++)c=h+((f>j?j:f)<<2),p+=(B.r=D=I[c])*(O=T-f),m+=(B.g=P=I[c+1])*O,x+=(B.b=C=I[c+2])*O,_+=D,M+=P,k+=C,B=B.next;for(L=W,U=J,i=0;r>i;i++)I[h]=p*R>>G,I[h+1]=m*R>>G,I[h+2]=x*R>>G,p-=v,m-=b,x-=w,v-=L.r,b-=L.g,w-=L.b,c=y+((c=i+o+1)<j?c:j)<<2,_+=L.r=I[c],M+=L.g=I[c+1],k+=L.b=I[c+2],p+=_,m+=M,x+=k,L=L.next,v+=D=U.r,b+=P=U.g,w+=C=U.b,_-=D,M-=P,k-=C,U=U.next,h+=4;y+=r}for(i=0;r>i;i++){for(M=k=_=m=x=p=0,h=i<<2,v=T*(D=I[h]),b=T*(P=I[h+1]),w=T*(C=I[h+2]),p+=N*D,m+=N*P,x+=N*C,B=W,f=0;T>f;f++)B.r=D,B.g=P,B.b=C,B=B.next;for(g=r,f=1;o>=f;f++)h=g+i<<2,p+=(B.r=D=I[h])*(O=T-f),m+=(B.g=P=I[h+1])*O,x+=(B.b=C=I[h+2])*O,_+=D,M+=P,k+=C,B=B.next,E>f&&(g+=r);for(h=i,L=W,U=J,u=0;a>u;u++)c=h<<2,I[c]=p*R>>G,I[c+1]=m*R>>G,I[c+2]=x*R>>G,p-=v,m-=b,x-=w,v-=L.r,b-=L.g,w-=L.b,c=i+((c=u+T)<E?c:E)*r<<2,p+=_+=L.r=I[c],m+=M+=L.g=I[c+1],x+=k+=L.b=I[c+2],L=L.next,v+=D=U.r,b+=P=U.g,w+=C=U.b,_-=D,M-=P,k-=C,U=U.next,h+=r}return t}function l(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.exports={image:r,canvasRGBA:o,canvasRGB:u,imageDataRGBA:i,imageDataRGB:f}},{}],30:[function(t,e,n){var r=arguments[3],a=arguments[4],o=arguments[5],i=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(o),u=0,f=n.length;f>u;u++){var l=n[u],d=o[l].exports;if(d===t||d["default"]===t){e=l;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var s={},u=0,f=n.length;f>u;u++){var l=n[u];s[l]=l}a[e]=[Function(["require","module","exports"],"("+t+")(self)"),s]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[e]=e,a[c]=[Function(["require"],"var f = require("+i(e)+");(f.default ? f.default : f)(self);"),g];var h="("+r+")({"+Object.keys(a).map(function(t){return i(t)+":["+a[t][0]+","+i(a[t][1])+"]"}).join(",")+"},{},["+i(c)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(y.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}]},{},[1])(1)});
